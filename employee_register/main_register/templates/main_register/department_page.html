{% extends 'main_register/base.html' %}

{% block title %}
{{ company.name }}
{% endblock %}
{% load static %}
{% load crispy_forms_tags %}
{% block content %}
<!-- List of Departments in Selected Company -->
<div class="row justify-content-center">
    <div class="col-3">
        <h4>{{ company.name }}</h4>
        <div class="list-group">
            {% for department in departments %}
            <a href="{{department.id}}/" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                {{ department.name }}
                <small class="text-muted">
                    {{ department.employees.count }} 
                    {% if department.employees.count == 1 %}
                    Employee
                    {% else %}
                    Employees
                    {% endif %}
                </small>
            </a>
            {% endfor %}
            <button type="button" id="new" class="list-group-item list-group-item-action d-flex justify-content-between align-items-center">
                Add New
                <i class="bi bi-plus"></i>
            </button>

            <li class="list-group-item" id="new_form" style="display:none;">
                <form action="{{department.id}}" method="POST">
                    {% csrf_token %}
                    {{ department_form|crispy }}
                    <button type="submit" name="submit" class="btn btn-success btn-sm">Submit</button>
                </form>
            </li>
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}
<script src="{% static 'main_register/script.js' %}" defer></script>
{% endblock %}